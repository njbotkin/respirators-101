<div class="category open{open}">
	<div class="clickable category-title">
		<a href="{ item.path }">{item.title}</a>
		<div class="chevron icon-angle-left" on:click="clicky( open )"></div>
	</div>
	<div class="expand">
		<slot></slot>
	</div>
</div>

<style>

	@import 'colors';

	.expand a {
		border: 0;
		background: $blue2;
	}

	.category.opentrue .chevron {
		transform: rotate(90deg);
	}


	.category-title {
		position:relative;

		.chevron {
			display: block;
			position:absolute;
			top: 0; 
			right:0;
			width: 50px;
			height: 50px;
			font-size: 28px;
			line-height: 50px;
			text-align: center;
			transition: transform .2s ease-out;
			transform: rotate(270deg);
		}

		.chevron::before {
			margin-left: -2px;
		}
	}

.clickable {
	cursor: pointer; 
}

:global(.expand.initialized) {
	transition: height 0.2s ease-out;
	height: auto;
	overflow: hidden;
}

:global(.category.openfalse .expand.initialized) {
	height: 0 !important;
}

</style>

<script>

export default {
	data() {
		return {
			open: false
		}
	},
	oncreate() {
		this._state.registerExpand(this);
	},
	methods: {
		clicky(open) {
			this._state.closeAllExpands()
			this._set({open: !open})
		}
	}
}

</script>
