<div class="chemical" data-open="{ open }">
	<div class="title" on:click="set({ open: !open })" id="{ c.id || '' }">
		<span class="name">{@html (highlight && c.nameHighlit) || c.name }</span>
		{ #if c.synonyms }
			<span class="synonyms">({@html (highlight && c.synonymsHighlit) || c.synonyms })</span>
		{ /if }
	</div>

	{ #if open } <!-- lots faster than simply hiding -->

		<div class="contents">

			<table>
				<tr>
					<td>
						<label>CAS</label>
						{ c.cas }
					</td>
					<td>
						<label>IDLH</label>
						{@html c.idlh }
					</td>
				</tr>
			</table>

			<!-- <div class="limits supsection">

				<label>Exposure Limits</label>

				<table>
					<tr>
						<td>
							<label>NIOSH REL</label>
							{@html c.niosh_rel }
						</td>
						<td>
							<label>OSHA PEL</label>
							{@html c.osha_pel }
						</td>
					</tr>
				</table>
				
			</div> -->

			<div class="els">
				{ #each Object.entries(c.forms) as form }

					<div class="form"> 

						{ #if form[0] !== 'regular' }<label>{ form[0] }</label>{ /if }

						<table>
							<thead>
								<tr>
									{ #if form[1].osha_pel }
										<th>
											OSHA PEL
										</th>
									{ /if }

									{ #if form[1].cal_osha_pel }
										<th>
											Cal/OSHA PEL 8-hour TWA
										</th>
									{ /if }

									{ #if form[1].niosh_rel }
										<th>
											NIOSH REL Up to 10-hour TWA
										</th>
									{ /if }
								</tr>
							</thead>
							<tbody>
								<tr>
									{ #if form[1].osha_pel }
										<td>
											<ExposureLimitGroup el="{ form[1].osha_pel }" />
										</td>
									{ /if }

									{ #if form[1].cal_osha_pel }
										<td>
											<ExposureLimitGroup el="{ form[1].cal_osha_pel }" />
										</td>
									{ /if }

									{ #if form[1].niosh_rel }
										<td>
											<ExposureLimitGroup el="{ form[1].niosh_rel }" />
										</td>
									{ /if }
								</tr>
							</tbody>
						</table>
					</div>

				{ /each }
			</div>

			<div class="block">
				<label>Physical Description</label>
				{@html c.physical_description }
			</div>

			<table>
				<tr>
					<td>
						<label>Exposure Routes</label>
						{@html c.exposure_routes }
					</td>
					<td>
						<label>Target Organs</label>
						{@html c.taget_organs }
					</td>
				</tr>
			</table>

			<div class="block supsection">
				<label>Personal Protection/Sanitation</label>

				<table class="table">	
					<tr><td><label>Skin		</label></td><td>{@html c.ps }</td></tr>
					<tr><td><label>Eyes		</label></td><td>{@html c.pe }</td></tr>
					<tr><td><label>Wash	Skin</label></td><td>{@html c.pw }</td></tr>
					<tr><td><label>Remove	</label></td><td>{@html c.pr }</td></tr>
					<tr><td><label>Change	</label></td><td>{@html c.pc }</td></tr>
					<tr><td><label>Provide	</label></td><td>{@html c.pp }</td></tr>
				</table>
			</div>

		</div>

	{ /if }

</div>

<style>

	@import 'colors';

	:global(.chemical) {
		.title {
			cursor: pointer;

			em {
				font-weight: bold;
				font-style: normal;
			}
		}
	}
	.contents {
		margin-top: 5px;
		border-top: 1px solid #ddd;
		padding-top: 5px;
	}

	.block {
		margin: 20px 0;
	}

	.supsection {
		border-bottom: 1px solid #ddd;

		> label {
			border-bottom: 1px solid #ddd;
			padding-bottom: 5px;
		}
	}

	label {
		display:block;
		font-weight: bold;
		font-size: 80%;
	}

	.protection label {
		display: inline;
	}

	.synonyms {
		font-size: 80%;
		color: #aaa;
	}

	.chemical {
		padding: 5px 10px;
		transition: all .2s;
	}

	[data-open=false] {

		.contents {
			display: none;
		}
	}

	[data-open=true] {

		background: #fff; 
		margin: 5px 0;
		box-shadow: 1px 1px 10px #00000066;

		.contents {
			display: block;
		}
	}

	table { 
		width: 100%;
		border-spacing: 10px;
	}

	.form {
		table {
			border-collapse: collapse;
			td {
				vertical-align: top;
				border: 1px solid #ddd;
				padding: 0;
				/*padding: 10px;*/
			}
			th {
				text-align: left;
				vertical-align: bottom;
				border: 1px solid #ddd;
				padding: 10px;
			}
		}
	}

</style>

<script>

	import ExposureLimitGroup from './ExposureLimitGroup.html'

	export default {
		components: {
			ExposureLimitGroup
		},
		data() {
			return {
				open: false
			}
		}
	}

</script>
